<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Live Streams</title>
  <style>
    body { 
      background:#000; 
      color:#fff; 
      font-family:Arial; 
      margin:0; 
      padding:0;
    }
    .section { 
      max-width:900px; 
      margin:40px auto; 
      text-align:center; 
    }
    iframe { 
      width:100%; 
      height:450px; 
      border:0; 
      background:#000; /* ensures no white border from iframe */ 
    }
    h1, h2 { text-align:center; }
  </style>
</head>
<body>

<h1>Live Streams</h1>
<div id="videos">Loading streams...</div>

<script>
// FAST JSON API (instant response)
const SHEET_JSON_URL =
  "https://docs.google.com/spreadsheets/d/15PSX1c3VavO3KcTZWCdfVEheZNiBduTrYf4Bv4Klz3k/gviz/tq?gid=0&tqx=out:json"
  + "&cache=" + Date.now();

async function load() {
  const res = await fetch(SHEET_JSON_URL);
  const text = await res.text();

  // Clean Google JSON wrapper
  const json = JSON.parse(text.substr(47).slice(0, -2));

  const rows = json.table.rows;
  const container = document.getElementById("videos");
  container.innerHTML = ""; // clear “Loading…”

  rows.forEach(row => {
    let title = row.c[0]?.v || "";
    let url   = row.c[1]?.v || "";

    if (!url.startsWith("http")) return;

    container.innerHTML += `
      <div class="section">
        <h2>${title}</h2>
        <iframe src="${url}" allowfullscreen
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; picture-in-picture"></iframe>
      </div>
    `;
  });
}

load();
</script>

</body>
</html>
