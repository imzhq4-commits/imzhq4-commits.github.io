<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Sports Streams</title>

<style>
  body {
    margin: 0;
    background: #fff;
    font-family: Arial, sans-serif;
  }

  /* TOP TABS */
  .tabs {
    display: flex;
    justify-content: center;
    background: #111;
  }

  .tab-btn {
    padding: 15px 25px;
    border: none;
    background: #111;
    color: #fff;
    cursor: pointer;
    font-size: 16px;
  }

  .tab-btn.active {
    background: #fff;
    color: #000;
    font-weight: bold;
  }

  .tab-btn:hover {
    background: #333;
  }

  /* GRID LAYOUT */
  #streams {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 20px;
    padding: 20px;
    max-width: 1200px;
    margin: auto;
  }

  .stream-box {
    background: #f5f5f5;
    padding: 15px;
    border-radius: 10px;
    box-shadow: 0 0 6px rgba(0,0,0,0.1);
    text-align: center;
  }

  .stream-title {
    font-size: 18px;
    margin-bottom: 12px;
    font-weight: bold;
  }

  iframe {
    width: 100%;
    height: 350px;
    border: 0;
    border-radius: 10px;
  }

  /* MOBILE */
  @media (max-width: 800px) {
    #streams {
      grid-template-columns: 1fr; /* 1 per row on mobile */
    }
  }
</style>

</head>
<body>

<!-- TOP TABS -->
<div class="tabs">
  <button class="tab-btn active" data-sport="football">Football</button>
  <button class="tab-btn" data-sport="basketball">Basketball</button>
  <button class="tab-btn" data-sport="ufc">UFC</button>
  <button class="tab-btn" data-sport="boxing">Boxing</button>
</div>

<!-- STREAM GRID -->
<div id="streams">Loading streams...</div>

<script>
// Google Sheet URL (A=title, B=url, C=sport)
const SHEET_JSON_URL =
  "https://docs.google.com/spreadsheets/d/15PSX1c3VavO3KcTZWCdfVEheZNiBduTrYf4Bv4Klz3k/gviz/tq?gid=0&tqx=out:json";

let allStreams = [];

async function loadStreams() {
  const res = await fetch(SHEET_JSON_URL + "&cache=" + Date.now());
  const text = await res.text();
  const json = JSON.parse(text.substr(47).slice(0, -2));
  const rows = json.table.rows;

  allStreams = rows.map(r => ({
    title: r.c[0]?.v || "",
    url: r.c[1]?.v || "",
    sport: (r.c[2]?.v || "").toLowerCase()
  })).filter(x => x.title && x.url);

  renderSport("football");
}

// Load streams instantly when switching tab
function renderSport(sport) {
  const container = document.getElementById("streams");
  const filtered = allStreams.filter(s => s.sport === sport);

  if (filtered.length === 0) {
    container.innerHTML = `<p style="padding:20px;">No streams available.</p>`;
    return;
  }

  container.innerHTML = filtered.map(s => `
    <div class="stream-box">
      <div class="stream-title">${s.title}</div>
      <iframe src="${s.url}" allowfullscreen></iframe>
    </div>
  `).join("");
}

// Tab events
document.querySelectorAll(".tab-btn").forEach(btn => {
  btn.addEventListener("click", () => {
    document.querySelectorAll(".tab-btn").forEach(b => b.classList.remove("active"));
    btn.classList.add("active");
    renderSport(btn.dataset.sport);
  });
});

loadStreams();
</script>

</body>
</html>
